<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Private Class - Data Engineer 365</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 350px;
      background: #f9f9f9;
      padding: 20px;
      overflow-y: auto;
      border-right: 1px solid #ddd;
    }
    .content {
      flex: 1;
      padding: 20px;
      background: #fff;
      overflow-y: auto;
      position: relative;
    }
    .lesson {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: #fff;
    }
    .lesson:hover {
      background: #f3f3f3;
    }
    .lesson-info {
      max-width: 70%;
      cursor: pointer;
    }
    .lesson-title {
      font-weight: bold;
      margin-bottom: 4px;
    }
    .lesson-time {
      font-size: 14px;
      color: #555;
    }
    .resource-btn {
      position: relative;
    }
    .resource-btn button {
      background: #e0e0e0;
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 6px 10px;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .resource-dropdown {
      display: none;
      position: absolute;
      right: 0;
      top: 36px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 6px;
      box-shadow: 0px 2px 6px rgba(0,0,0,0.2);
      z-index: 100;
      min-width: 200px;
    }
    .resource-dropdown a {
      display: block;
      padding: 8px 12px;
      text-decoration: none;
      color: #333;
    }
    .resource-dropdown a:hover {
      background: #f0f0f0;
    }
    iframe {
      width: 100%;
      height: 600px;
      border: none;
    }
    .fullscreen-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 8px 14px;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .fullscreen-btn:hover {
      background: #0056b3;
    }

    /* Quiz styles */
    .question-box {
      margin: 20px 0;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #f9f9f9;
    }
    .option {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      margin: 8px 0;
      cursor: pointer;
      background: #fff;
    }
    .option.correct { background: #d4edda; border-color: #28a745; }
    .option.wrong { background: #f8d7da; border-color: #dc3545; }
    .result {
      margin-top: 10px;
      padding: 10px;
      border-radius: 6px;
      display: none;
    }
    .result.success { background: #d4edda; color: #155724; }
    .result.error { background: #f8d7da; color: #721c24; }
  </style>
</head>
<body>
<div class="sidebar">
  <h3>üìò Introduction to Databases, SQL, and MySQL</h3>
  <div id="lessons"></div>
</div>

<div class="content" id="lessonContent"></div>

<script>
  const lessons = [
    {
      type: "video",
      title: "Welcome to SQL",
      time: "03:59",
      file: "https://drive.google.com/file/d/1MmbU6UZayFXQFBNzfzuPg920mxyJ4pQ9/preview",
      resources: [
        {name: "‚¨á SQL - Course Notes (PDF)", link: "https://drive.google.com/uc?export=download&id=1WbMQ05LoKPMco0JeGFLvregv862JD7lN"},
        {name: "‚¨á English Subtitles (.srt)", link: "https://drive.google.com/uc?export=download&id=SUBTITLE_FILE_ID1"}
      ]
    },
    {
      type: "video",
      title: "Why SQL?",
      time: "03:17",
      file: "https://drive.google.com/file/d/1hf-V9tKuwTiq0dAm0mzlsMyGHV-4_k2h/preview",
      resources: [
        {name: "‚¨á SQL FAQ (PDF)", link: "https://drive.google.com/uc?export=download&id=1OeMH0BehpQH4m2YEiOOVRmEC8aZ7sszT"},
        {name: "‚¨á Subtitles (.srt)", link: "https://drive.google.com/uc?export=download&id=SUBTITLE_FILE_ID2"}
      ]
    },
    {
      type: "quiz",
      title: "Exercise",
      questions: [
        {
          text: "Which of the following is a database language?",
          options: [
            {text: "SQL", correct: true},
            {text: "HTML", correct: false},
            {text: "CSS", correct: false}
          ],
          multiple: false
        },
        {
          text: "Which of these are RDBMS examples?",
          options: [
            {text: "MySQL", correct: true},
            {text: "Oracle", correct: true},
            {text: "Python", correct: false}
          ],
          multiple: true
        },
        {
          text: "SQL stands for?",
          options: [
            {text: "Structured Query Language", correct: true},
            {text: "Simple Query Language", correct: false}
          ],
          multiple: false
        }
      ]
    },
    {
      type: "video",
      title: "Why MySQL?",
      time: "01:57",
      file: "https://drive.google.com/file/d/1RFnMy1R9yhhR2HKRamoZ0LnDujgQjmjQ/preview"
    }
  ];

  const lessonsContainer = document.getElementById("lessons");
  const lessonContent = document.getElementById("lessonContent");

  lessons.forEach((lesson, index) => {
    const div = document.createElement("div");
    div.classList.add("lesson");
    div.innerHTML = `
      <div class="lesson-info" onclick="loadLesson(${index})">
        <div class="lesson-title">‚úî ${lesson.title}</div>
        ${lesson.time ? `<div class="lesson-time">‚ñ∂ Lesson - ${lesson.time} min</div>` : ""}
        ${lesson.type==="quiz" ? `<div class="lesson-time">üìù ${lesson.questions.length} questions</div>` : ""}
      </div>
      ${lesson.resources ? `
        <div class="resource-btn">
          <button onclick="toggleDropdown(event, ${index})">üìÇ Resources ‚ñæ</button>
          <div class="resource-dropdown" id="dropdown-${index}">
            ${lesson.resources.map(r => `<a href="${r.link}" target="_blank" download>${r.name}</a>`).join("")}
          </div>
        </div>` : ""}
    `;
    lessonsContainer.appendChild(div);
  });

  function loadLesson(index) {
    const lesson = lessons[index];
    if (lesson.type === "video") {
      lessonContent.innerHTML = `
        <h2>${lesson.title}</h2>
        <iframe id="videoFrame" src="${lesson.file}" allow="autoplay; fullscreen"></iframe>
        <button class="fullscreen-btn" onclick="openFullscreen()">‚õ∂ Fullscreen</button>
      `;
    } else if (lesson.type === "quiz") {
      startQuiz(lesson);
    }
  }

  // QUIZ LOGIC
  let currentQ = 0, questions = [];

  function startQuiz(lesson){
    currentQ = 0;
    questions = lesson.questions;
    renderQuestion();
  }

  function renderQuestion(){
    const q = questions[currentQ];
    lessonContent.innerHTML = `
      <h2>Exercise</h2>
      <div class="question-box">
        <p><b>Q${currentQ+1}:</b> ${q.text}</p>
        ${q.options.map((opt,i)=>`
          <div class="option" onclick="selectOption(${i})">${opt.text}</div>
        `).join("")}
        <div id="resultBox" class="result"></div>
      </div>
    `;
  }

  let selected = [];
  function selectOption(i){
    const q = questions[currentQ];
    if(!q.multiple){ selected=[i]; }
    else {
      if(selected.includes(i)) selected=selected.filter(x=>x!==i);
      else selected.push(i);
    }
    renderSelections();
  }

  function renderSelections(){
    const optionDivs=document.querySelectorAll(".option");
    optionDivs.forEach((div,i)=>{
      div.style.borderColor = selected.includes(i) ? "#007bff" : "#ddd";
    });
    checkAnswer(); // auto check
  }

  function checkAnswer(){
    const q = questions[currentQ];
    const resultBox=document.getElementById("resultBox");
    let allCorrect=true;

    const optionDivs=document.querySelectorAll(".option");
    optionDivs.forEach((div,i)=>{
      if(selected.includes(i)){
        if(q.options[i].correct){ div.classList.add("correct"); }
        else { div.classList.add("wrong"); allCorrect=false; }
      }
    });

    if(q.multiple){
      q.options.forEach((opt,i)=>{
        if(opt.correct && !selected.includes(i)) allCorrect=false;
      });
    }

    resultBox.style.display="block";
    if(allCorrect){
      resultBox.textContent="‚úÖ Correct! Moving to next...";
      resultBox.className="result success";
      setTimeout(()=>nextQuestion(),1000);
    } else {
      resultBox.textContent="‚ùå Try again!";
      resultBox.className="result error";
    }
    return allCorrect;
  }

  function nextQuestion(){
    if(currentQ<questions.length-1){
      currentQ++;
      selected=[];
      renderQuestion();
    } else {
      lessonContent.innerHTML = `<h2>Exercise Completed ‚úÖ</h2>`;
    }
  }

  function toggleDropdown(event, index) {
    event.stopPropagation();
    document.querySelectorAll(".resource-dropdown").forEach(d => d.style.display = "none");
    const dropdown = document.getElementById(`dropdown-${index}`);
    dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
  }

  document.addEventListener("click", () => {
    document.querySelectorAll(".resource-dropdown").forEach(d => d.style.display = "none");
  });

  function openFullscreen() {
    const iframe = document.getElementById("videoFrame");
    if (iframe.requestFullscreen) {
      iframe.requestFullscreen();
    } else if (iframe.mozRequestFullScreen) {
      iframe.mozRequestFullScreen();
    } else if (iframe.webkitRequestFullscreen) {
      iframe.webkitRequestFullscreen();
    } else if (iframe.msRequestFullscreen) {
      iframe.msRequestFullscreen();
    }
  }
</script>
</body>
</html>

